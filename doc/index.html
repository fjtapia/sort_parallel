<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <meta name="generator" content="HTML Tidy for Windows (vers 1st November 2003), see www.w3.org" />
    <title>Boost C++ Libraries</title>
    <link rel="icon" href="http://www.boost.org/favicon.ico" type="image/ico" />
    <link rel="stylesheet" type="text/css" href="http://www.boost.org/style-v2/section-welcome.css" />
    <link href="files/code.css" type="text/css" rel="stylesheet" />
    <!--[if IE 7]> <style type="text/css"> body { behavior: url(http://www.boost.org/style-v2/csshover3.htc); } </style> <![endif]-->
    <meta name="google-site-verification" content="mpr2HgFpodnbF_8fv4qXd9roIClVwtX3C-Kd3F6r61w" />
  </head>
  <!-- Note: Editing website content is documented at:http://www.boost.org/development/website_updating.html-->
  <!--***************************************************************************************** -->
  <!--                                        B O D Y                                           -->
  <!--***************************************************************************************** -->
  <body>
    <div id="heading">
      <div class="heading-inner">
        <h1 class="heading-title"> <a href="http://www.boost.org/"> <img src="http://www.boost.org//gfx/space.png"
              alt="Boost C++ Libraries" class="heading-logo" /> <span class="heading-boost">Boost</span>
            <span class="heading-cpplibraries">C++ Libraries</span> <img src="img/preliminary.gif"
              alt="Preliminary" style="width: 300px; height: 80px;" /> </a></h1>
        <p class="heading-quote"> <q>...one of the most highly regarded and
            expertly designed C++ library projects in the world.</q> <span class="heading-attribution">—
            <a href="http://www.gotw.ca/" class="external">Herb Sutter</a> and <a
              href="http://en.wikipedia.org/wiki/Andrei_Alexandrescu" class="external">Andrei
              Alexandrescu</a>, <a href="http://safari.awprofessional.com/?XmlId=0321113586"
              class="external">C++ Coding Standards</a></span></p>
      </div>
    </div>
    <div class="cuerpo_central"> <br />
      <div class="cuerpo_texto"> <br />
        <span style="font-size: 32pt;"> <span style="font-weight: bold; color: black;">
            <a href="index.html">The Boost Sort Parallel Library</a> </span></span><br />
        <div>
          <div class="author">
            <h3 class="author"><br />
              <span class="firstname"></span></h3>
            <h3 style="font-style: italic;" class="author"><span class="firstname">Francisco
                Jose Tapia</span>   Copyright © 2016 Francisco Jose Tapia</h3>
          </div>
        </div>
        <div>
          <div class="legalnotice">
            <p><span style="font-style: italic;">Distributed under the Boost
                Software License, Version 1.0. (See accompanying file
                LICENSE_1_0.txt or copy at </span><a style="font-style: italic;"
                href="file:///LICENSE_1_0.txt" target="_top">
                http://www.boost.org/LICENSE_1_0.txt </a><span style="font-style: italic;">)</span>
            </p>
          </div>
        </div>
        <br />
        <span style="font-size: 32pt;font-style: italic; color: black;">
          PRELIMINARY </span><br />
        <p>The <strong>Boost Sort Parallel Library</strong>, has been designed
          for be included in the Boost Sort Library, created by Steven Ross,
          which currently contains the SpreadSort algorithms.</p>
        <p>This library is pending final approval, and may have some changes
          some changes before the final version and definitive approval in the
          Boost Library.</p>
        <br />
        <br />
        <div class="caja_menu"> <span style="font-size: 16pt;font-weight: bold; color: black;"><br />
            Table of Contents</span> <br />
          <br />
          <div style="margin-left: 40px;">
            <div style="margin-left: 40px;"><a href="index.html#Introduction">1.-
                Introduction</a><br />
              <div style="margin-left: 40px;"><a href="index.html#description">1.1.-
                  Description </a><br />
                <a href="index.html#perspective">1.2.- Present Perspective</a><br />
                <a href="index.html#algorithm">1.3.- New Parallel Sort Algorithm</a><br />
                <a href="index.html#thread">1.4.- Thread specification </a><br />
                <a href="index.html#programming">1.5.- Programming</a><br />
                <a href="index.html#examples">1.6.- Examples</a> </div>
            </div>
            <div style="margin-left: 40px;"><br />
              <a href="index.html#algorithms">2.- Sorting algorithms</a> <br />
              <div style="margin-left: 40px;"><a href="index.html#introsort">2.1.-
                  sort</a><br />
                <a href="index.html#parallel_introsort">2.2.- parallel_sort </a><br />
                <a href="index.html#smart_merge_sort">2.3.- smart_merge_sort</a><br />
                <a href="index.html#parallel_stable_sort">2.4.-
                  parallel_stable_sort</a><br />
                <a href="index.html#sample_sort">2.5.- sample_sort</a><br />
                <a href="index.html#less_ptr">2.6.- less_ptr_no_null</a> </div>
              <br />
              3<a href="benchmark.html#benchmarks">.- Benchmarks</a> <br />
              <div style="margin-left: 40px;"> <a href="benchmark.html#bdescription">3.1.-
                  Description</a><br />
                <a href="benchmark.html#linux"><span style="color: #0000ee;">3.2.-
                    Linux 64 GCC 5.2 Benchmarks</span></a><br />
                <div style="margin-left: 40px;"><a href="benchmark.html#sti">3.2.1.-
                    </a><a href="benchmark.html#lsingle"><span style="color: #0000ee;">Single
                      Thread Algorithms</span></a><br />
                  <a href="benchmark.html#lparallel">3.2.2.- </a><a href="benchmark.html#lparallel">Parallel
                    Algorithms</a></div>
                <a href="benchmark.html#windows">3.3.- Windows 10 Visual Studio
                  2015 Benchmarks</a><br />
                <div style="margin-left: 40px;"> <a href="benchmark.html#wsingle">3.3.1.-
                    </a><a href="benchmark.html#sta"><span style="color: #0000ee;">Single
                      Thread Algorithms</span></a><br />
                  <a href="benchmark.html#wparallel">3.3.2.- </a><a href="benchmark.html#pa">Parallel
                    Algorithms</a></div>
              </div>
              <br />
              <a href="benchmark.html#bibliography">4.- Bibliography  </a><br />
              <a href="benchmark.html#gratitude"><br />
                5.- Gratitude</a><br />
              <br />
            </div>
          </div>
        </div>
        <br />
        <br />
        <p><a name="Introduction"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.-
            Introduction</span></p>
        <p> </p>
        <p><a name="description"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.1.-
            Description </span></p>
        <p>This library provides both <span style="font-weight: bold;">stable
            and unstable</span> sorting algorithms, in <span style="font-weight: bold;">single
            threaded and parallel</span> versions.<br />
          <br />
          These algorithms<span style="font-weight: bold;"> do not use any other
            library</span> or utility. Compiling this library requires a <span
            tyle="font-weight: bold;"> C++11 compliant compiler.</span><br />
          <br />
          The algorithms <span style="font-weight: bold;">use a comparison
            object</span>, in the same way as the standard library sort
          algorithms. If you don't define it, the comparison object defaults to
          std::less, which uses the &lt; operator internally for comparisons.<br />
          <br />
          The algorithms are <span style="font-weight: bold;">exception safe</span>,
          meaning that,  the exceptions generated by the algorithms guarantee
          the integrity of the objects to sort, but not their relative order. If
          the exception is generated inside the objects (in the move or in the
          copy constructor.. ) the results can be unpredictable.<br />
          <br />
          This library is <span style="font-weight: bold;">include only.</span>
          There is no need to link with any external static or dynamic library.
          This doesn't  depend on any other boost files, variables or libraries
          or any other external libraries. To use this library, just include the
          files in the boost/sort/parallel folder.</p>
        <br />
        This table provides you a brief description of the sort algorithms in
        the library.<br />
        <br />
        <table cellspacing="0" border="1" style="width: 841px; height: 209px;">
          <tbody>
            <tr>
              <td><span style="font-weight: bold;">Algorithm</span></td>
              <td style="width: 71px;"><span style="font-weight: bold;">Parallel
                </span></td>
              <td style="width: 77.7px;"><span style="font-weight: bold;"> Stable
                  </span></td>
              <td style="height: 60px; width: 228.317px;"><span style="font-weight: bold;"> Additional
                  memory </span></td>
              <td><span style="font-weight: bold;"> Best, average, and worst
                  case </span></td>
            </tr>
            <tr>
              <td>sort</td>
              <td>NO</td>
              <td>NO</td>
              <td>Log N</td>
              <td>  N Log N, N Log N , N Log N</td>
            </tr>
            <tr>
              <td style="width: 172.634px;">stable_sort</td>
              <td>NO</td>
              <td>YES</td>
              <td>N / 2 </td>
              <td style="width: 273.917px;">  <span style="font-weight: bold;"></span>N
                Log N, N Log N , N Log N</td>
            </tr>
            <tr>
              <td>parallel_sort</td>
              <td>YES</td>
              <td>NO</td>
              <td>block_size * num_threads</td>
              <td>  N Log N, N Log N , N Log N</td>
            </tr>
            <tr>
              <td>parallel_stable_sort</td>
              <td>YES</td>
              <td>YES</td>
              <td>N / 2</td>
              <td>  N Log N, N Log N , N Log N</td>
            </tr>
            <tr>
              <td>sample_sort</td>
              <td>YES</td>
              <td>YES</td>
              <td>N</td>
              <td>  N Log N, N Log N , N Log N</td>
            </tr>
          </tbody>
        </table>
        <br />
        The block_size is an internal parameter of the algorithm, which  in
        order to achieve the highest speed, change according the size of the
        objects to sort according the next table. The strings use a block_size
        of 128.<br />
        <br />
        <table cellspacing="0" border="1" style="width: 803px; height: 84px;">
          <tbody>
            <tr>
              <td style="width: 104.95px;">object size (bytes)</td>
              <td style="width: 62px; background-color: white; text-align: center;">1
                - 15<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">16
                - 31<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">32
                - 63<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">64
                - 127<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">128
                - 255<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">256
                - 511<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: left;">512
                - <br />
              </td>
            </tr>
            <tr>
              <td>block_size <br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">4096<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">2048<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">1024<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">768<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">512<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">256<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">128<br />
              </td>
            </tr>
          </tbody>
        </table>
        <br />
        <br />
        <p><a name="perspective"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.2.-
Present
            Perspective </span></p>
        <br />
        There are two primary categories of parallelization in sorting
        algorithms.<br />
        <br />
        <div style="margin-left: 40px;"><span style="font-weight: bold; text-decoration: underline;">SUBDIVISION
            ALGORITHMS</span><br />
          <br />
          Filter the data and generate two or more parts. Each part obtained is
          filtered and divided by other threads, until the size of the data to
          sort is smaller than a predefined size, then it is sorted by a single
          thread. The algorithm most frequently used in the filter and sorting
          is quick sort.<br />
          <br />
          These algorithms are <span style="font-weight: bold;"> fast with a
            small number of threads</span>, but are inefficient with a great
          number of HW (hardware) threads. Examples of this category are <br />
          <div style="margin-left: 40px;"> - Intel Threading Building Blocks
            (TBB) <br />
             - Microsoft PPL Parallel Sort.</div>
          <br />
          <br />
          <span style="font-weight: bold; text-decoration: underline;">MERGING
            ALGORITHMS</span><br />
          <br />
          Divide the data in parts, and each part is sorted by a thread. When
          the parts are sorted, they are merged to obtain the final results. The
          problem of these algorithms is they need additional memory for the
          merge, usually the same size as the data.<br />
          <br />
          With a small number of threads, these algorithms have similar speed to
          than the subdivision algorithms, but with <span style="font-weight: bold;">many
            threads they are  much faster</span> . Examples of this category are
          :<br />
          <div style="margin-left: 40px;">  - GCC Parallel Sort (based on
            OpenMP)<br />
             - Microsoft PPL Parallel Buffered Sort</div>
        </div>
        <br />
        <br />
        <p><a name="algorithm"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.3.-
            New Parallel Sort Algorithm </span></p>
        <br />
        This generates an <span style="font-weight: bold;">undesirable duality</span>.
        With a small number of threads the optimal algorithm is not the optimal
        for a big number of threads. For this reason, the SW designed for a
        small machine is inadequate for a big machine and vice versa. But the
        main problem for the merging algorithms is the additional memory used,
        usually of the same size as the data.<br />
        <br />
        This version have as a <span style="font-weight: bold;">new
          parallel_sort algorithm</span> (<span style="font-style: italic;">
          internally named Block Indirect</span>), created for processors
        connected with<span style="font-weight: bold;"> shared memory</span>. <br />
        It is a <span style="font-weight: bold;">hybrid</span> algorithm. With
        small number of threads, it is a subdivision algorithm, but with many
        threads is a merging algorithms, which need a small  auxiliary memory (
        block_size * number of threads).<br />
        <br />
        The block_size is an internal parameter of the algorithm, which  in
        order to achieve the highest speed, change according the size of the
        objects to sort according the next table. The strings use a block_size
        of 128.<br />
        <br />
        <table cellspacing="0" border="1" style="width: 803px; height: 84px;">
          <tbody>
            <tr>
              <td style="width: 104.95px;">object size (bytes)</td>
              <td style="width: 62px; background-color: white; text-align: center;">1
                - 15<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">16
                - 31<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">32
                - 63<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">64
                - 127<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">128
                - 255<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">256
                - 511<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: left;">512
                - <br />
              </td>
            </tr>
            <tr>
              <td>block_size <br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">4096<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">2048<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">1024<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">768<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">512<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">256<br />
              </td>
              <td style="width: 62px; background-color: white; text-align: center;">128<br />
              </td>
            </tr>
          </tbody>
        </table>
        <br />
        This algorithm eliminates the duality. You compile your program using
        the new algorithms. When your program runs on a machine with a small
        number of threads the algorithm internally uses a subdivision algorithm
        and  has similar performance to  TBB, and when run on a machine with
        many threads, internally uses the new algorithm and has the performance
        of GCC Parallel Sort, with the<span style="font-weight: bold;">
          additional advantage</span> of <span style="font-weight: bold;">reduced
          memory consumption.</span><br />
        <br />
        The algorithm uses an <strong style="font-weight: bold;">auxiliary
          memory of block_size elements</strong> for each thread. The <span style="font-weight: bold;">worst
          case</span> for the algorithm is when there are <span style="font-weight: bold;">very
          big elements</span> and <span style="font-weight: bold;">many threads</span>.
        With big elements (512 bytes), and 12 threads, The memory measured was:
        <p>  </p>
        <table style="width: 558px; height: 122px;">
          <thead>
            <tr>
              <th><span style="font-weight: bold;">Algorithm</span></th>
              <th><span style="font-weight: bold;">Memory used in MB</span></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="width: 307.45px;">GCC Parallel Sort (OpenMP)</td>
              <td style="width: 244.55px;">1565 MB</td>
            </tr>
            <tr>
              <td>Threading Building Blocks (TBB)</td>
              <td>783 MB</td>
            </tr>
            <tr>
              <td>Block Indirect Sort</td>
              <td>812 MB</td>
            </tr>
          </tbody>
        </table>
        <br />
        <br />
        <em>This <strong style="font-weight: bold;">new parallel_sort algorithm
            had been created and implemented specifically for this library</strong>
          by the author.</em><br />
        <em>If you are interested in a <span style="font-weight: bold;">brief
            description</span> of the algorithm, you can find in the next link</em>
        <a href="../block_indirect_sort_brief_en.pdf" target="_blank" data-original-href="../block_indirect_sort_brief_en.pdf">
          Block Indirect Sort Brief </a> <br />
        <em>If you are interested in a <span style="font-weight: bold;">detailed
            description</span> of the algorithm, you can find in the next link</em>
        <a target="_blank" href="../block_indirect_sort_en.pdf" data-original-href="../block_indirect_sort_en.pdf">
          Block Indirect Sort </a><br />
        <span style="font-style: italic;">If you want run the <span style="font-weight: bold;">benchmarks
            in your machine</span>, all the code, instructions and procedures
          are in</span>  <a target="_blank" href="https://github.com/fjtapia/sort_parallel_benchmark">Sort
          Parallel Benchmarks</a>
        <p><br />
          <span style="font-size: 18pt;font-weight: bold; color: black;"></span></p>
        <br />
        <p><a name="thread"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.4.-
            Thread specification in the parallel algorithms </span></p>
        <p><font face="Arimo, sans-serif">The parallel algorithms have a
            parameter indicating the number of thread to use in the sorting
            process, which always is the last value in the call. The default
            value (if left unspecified) is the number of HW threads of the
            machine where the program is running.</font></p>
        <p><font face="Arimo, sans-serif"> </font> </p>
        <p style="margin-bottom: 0cm; line-height: 100%"><span style="font-family: Arimo,sans-serif;">The
            parallel algorithms have 4 invocation formats:</span></p>
        <p style="margin-bottom: 0cm; line-height: 100%"><br />
          <span style="font-family: Arimo,sans-serif;"></span></p>
        <ul style="margin-left: 40px;">
          <li><span style="font-family: Arimo,sans-serif;">algorithm ( first
              iterator, last iterator, comparison object, number of threads )</span></li>
          <li><span style="font-family: Arimo,sans-serif;">algorithm ( first
              iterator, last iterator, comparison object )</span><br />
            <span style="font-family: Arimo,sans-serif;"></span></li>
          <li><span style="font-family: Arimo,sans-serif;">algorithm ( first
              iterator, last iterator, number of threads )</span><br />
            <span style="font-family: Arimo,sans-serif;"></span></li>
          <li><span style="font-family: Arimo,sans-serif;"></span><span style="font-family: Arimo,sans-serif;">algorithm
              ( first iterator, last iterator )</span></li>
        </ul>
        <p style="margin-bottom: 0cm; line-height: 100%"><span style="font-style: italic;">If
            no comparison object is specified, the default class (
            std::less&lt;value_t&gt; ) is used.</span></p>
        <p style="margin-bottom: 0cm; line-height: 100%"><span style="font-style: italic;">If
            the number of threads is unspecified, the number of HW threads on
            the machine where the the program is running is used </span> </p>
        <span style="font-style: italic;"></span><br />
        <p><a name="programming"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.5.-
            Programming </span> </p>
          <br />
        You only need to include the file boost/sort/parallel/sort.hpp if you
        wish to use this<br />
        <br />
        <div class="caja_codigo">
          <pre><code><span style="font: 9pt Monospace;"><span class="style9"><br />#include &lt;boost/sort/parallel/sort.hpp&gt;</span></span>
          </code></pre>
        </div>
        <br />
        All the functions and definitions are in the namespace
        boost::sort::parallel<br />
        <br />
        <p><a name="examples"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.6.-
            Examples</span></p>
        <p><span style="font-size: 16pt;font-weight: bold; color: black;"></span></p>
        
        <p>This example uses the single threaded sort and stable_sort.</p>
        <p><br />
          <span style="font-size: 16pt;font-weight: bold; color: black;"></span></p>
        <div class="caja_codigo">
          <pre><code><span style="font: 9pt Monospace;"><span class="style9"><br />#include &lt;iostream&gt;
#include &lt;vector&gt;</span></span></code><code><span style="font: 9pt Monospace;"><span
class="style9"><code><span style="font: 9pt Monospace;"><span class="style9">#include &lt;random&gt;</span></span></code></span></span></code><br /><code><span
style="font: 9pt Monospace;"><span class="style9"><code><span style="font: 9pt Monospace;"><span
class="style9"><code><span style="font: 9pt Monospace;"><span class="style9"></span></span></code></span></span></code>#include &lt;boost/sort/parallel/sort.hpp&gt;</span><span
class="style5">namespace </span><span class="style11">bsp </span><span class="style10">= </span><span
class="style16">boost</span><span class="style10">::</span><span class="style16">sort</span><span
class="style10">::</span><span class="style11">parallel</span><span class="style10">;
		  
</span><span class="style5">int </span><span class="style11">main </span><span class="style10">(</span><span
class="style5">void</span><span class="style10">)
{   </span><span class="style2">//-------------- begin------------
    </span><span class="style16">std</span><span class="style10">::</span><span
class="style16">mt19937_64 </span><span class="style11">my_rand</span><span class="style10">(</span><span
class="style4">0</span><span class="style10">);
    </span><span class="style5">const uint32_t </span><span class="style11">NMAX </span><span
class="style10">= </span><span class="style4">1000000</span><span class="style10">;
    </span><span class="style16">std</span><span class="style10">::</span><span
class="style16">vector </span><span class="style10">&lt;</span><span class="style5">uint64_t</span><span
class="style10">&gt; </span><span class="style11">A</span><span class="style10">, </span><span
class="style11">B</span><span class="style10">;<br /><br /> </span><span class="style5">   for </span><span
class="style10">(</span><span class="style5">uint32_t </span><span class="style11">i </span><span
class="style10">=</span><span class="style4"> 0</span><span class="style10">; </span><span
class="style11">i </span><span class="style10">&lt; </span><span class="style11">NMAX</span><span
class="style10">; ++</span><span class="style11">i</span><span class="style10">)  </span><span
class="style11">A</span><span class="style10">.</span><span class="style16">push_back</span><span
class="style10">(</span><span class="style11">my_rand</span><span class="style10">());
    </span><span class="style11">B </span><span class="style10">= </span><span class="style11">A</span><span
class="style10">;
    </span><span class="style11">bsp</span><span class="style10">::</span><span
class="style11">sort </span><span class="style10">(</span><span class="style11">A</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">A</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">());
    </span><span class="style11">bsp</span><span class="style10">::</span><span
class="style11">stable_sort </span><span class="style10">(</span><span class="style11">B</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">B</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">());

    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">uint32_t </span><span
class="style11">i </span><span class="style10">=</span><span class="style4"> 0</span><span
class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span
class="style11">NMAX</span><span class="style10">; ++</span><span class="style11">i</span><span
class="style10">)
        </span><span class="style5">if </span><span class="style10">(</span><span
class="style11">A</span><span class="style10">[</span><span class="style11">i</span><span
class="style10">] != </span><span class="style11">B</span><span class="style10">[</span><span
class="style11">i</span><span class="style10">])  </span><span class="style16">std</span><span
class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Error in the sorting process\n"</span><span class="style10">;
    </span><span class="style5">return </span><span class="style4">0</span><span
class="style10">;
};</span></span></code></pre>
          <span class="style9"> </span> </div>
        <br />

	

<p>This example uses parallel_sort and sample_sort.</p>
        <p><br />
          <span style="font-size: 16pt;font-weight: bold; color: black;"></span></p>
	
        <p><br />
          <span style="font-size: 16pt;font-weight: bold; color: black;"></span></p>
        <div class="caja_codigo">
          <pre><code><span style="font: 9pt Monospace;"><span class="style9"><br />#include &lt;iostream&gt;
#include &lt;vector&gt;
</span></span></code><code><span style="font: 9pt Monospace;"><span class="style9"><code><span
style="font: 9pt Monospace;"><span class="style9">#include &lt;random&gt;</span></span></code>
#include &lt;boost/sort/parallel/sort.hpp&gt;
</span><span class="style5">namespace </span><span class="style11">bsp </span><span
class="style10">= </span><span class="style16">boost</span><span class="style10">::</span><span
class="style16">sort</span><span class="style10">::</span><span class="style11">parallel</span><span
class="style10">;

</span><span class="style5">int </span><span class="style11">main</span><span class="style10">( </span><span
class="style5">void </span><span class="style10">)
{   </span><span class="style2">//-------------- begin------------
    </span><span class="style16">std</span><span class="style10">::</span><span
class="style16">mt19937_64 </span><span class="style11">my_rand</span><span class="style10">(</span><span
class="style4">0</span><span class="style10">);
    </span><span class="style5">const uint32_t </span><span class="style11">NMAX </span><span
class="style10">= </span><span class="style4">1000000</span><span class="style10">;    </span><span
class="style16">std</span><span class="style10">::</span><span class="style16">vector </span><span
class="style10">&lt;</span><span class="style5">uint64_t</span><span class="style10">&gt; </span><span
class="style11">A</span><span class="style10">, </span><span class="style11">B</span><span
class="style10">;
    </span><span class="style5"><br />    for </span><span class="style10">(</span><span
class="style5">uint32_t </span><span class="style11">i </span><span class="style10">=</span><span
class="style4"> 0</span><span class="style10">; </span><span class="style11">i </span><span
class="style10">&lt; </span><span class="style11">NMAX</span><span class="style10">; ++</span><span
class="style11">i</span><span class="style10">) </span><span class="style11">A</span><span
class="style10">.</span><span class="style16">push_back</span><span class="style10"> (</span><span
class="style11">my_rand</span><span class="style10">());
    </span><span class="style11">B </span><span class="style10">= </span><span class="style11">A </span><span
class="style10">;
    </span><span class="style2">//------------------------------------------------------------------------
    // if the thread parameter is not specified, the number of thread used
    // is the number of HW threads of the machine where the program is running.
    // This number is calculate in each execution of the code
    //------------------------------------------------------------------------
    </span><span class="style11">bsp</span><span class="style10">::</span><span
class="style11">parallel_sort </span><span class="style10">(</span><span class="style11">A</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">A</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">());
    </span><span class="style11">bsp</span><span class="style10">::</span><span
class="style11">sample_sort </span><span class="style10">(</span><span class="style11">B</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">B</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">());

    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">uint32_t </span><span
class="style11">i </span><span class="style10">= </span><span class="style4">0</span><span
class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span
class="style11">NMAX</span><span class="style10">; ++</span><span class="style11">i</span><span
class="style10">)
        </span><span class="style5">if </span><span class="style10">(</span><span
class="style11">A</span><span class="style10">[</span><span class="style11">i</span><span
class="style10">] != </span><span class="style11">B</span><span class="style10">[</span><span
class="style11">i</span><span class="style10">]) </span><span class="style16">std</span><span
class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Error in the sorting process\n"</span><span class="style10">;
    </span><span class="style5">return </span><span class="style4">0 </span><span
class="style10">;
};</span></span> </code></pre>
          <span class="style9"> </span> </div>
        <br />



<p>This example uses parallel_sort and sample_sort and specifies the thread count.</p>
        <p><br />
          <span style="font-size: 16pt;font-weight: bold; color: black;"></span></p>
	
        
        <p><br />
          <span style="font-size: 16pt;font-weight: bold; color: black;"></span></p>
        <div class="caja_codigo">
          <pre><code><span style="font: 9pt Monospace;"><span class="style9"><br />#include &lt;iostream&gt;
#include &lt;vector&gt;
</span></span></code><code><span style="font: 9pt Monospace;"><span class="style9"><code><span
style="font: 9pt Monospace;"><span class="style9">#include &lt;random&gt;</span></span></code>
#include &lt;boost/sort/parallel/sort.hpp&gt;
</span><span class="style5">namespace </span><span class="style11">bsp </span><span
class="style10">= </span><span class="style16">boost</span><span class="style10">::</span><span
class="style16">sort</span><span class="style10">::</span><span class="style11">parallel</span><span
class="style10">;</span><span class="style5">int </span><span class="style11">main</span><span
class="style10"> (</span><span class="style5">void</span><span class="style10">)
{   </span><span class="style2">//-------------- begin------------
    </span><span class="style16">std</span><span class="style10">::</span><span
class="style16">mt19937_64 </span><span class="style11">my_rand</span><span class="style10">(</span><span
class="style4">0</span><span class="style10">);
    </span><span class="style5">const uint32_t </span><span class="style11">NMAX </span><span
class="style10">= </span><span class="style4">1000000</span><span class="style10">;
    </span><span class="style16">    uint32_t number_threads = std::thread::hardware_concurrency();<br />    std</span><span
class="style10">::</span><span class="style16">vector </span><span class="style10">&lt;</span><span
class="style5">uint64_t</span><span class="style10">&gt; </span><span class="style11">A</span><span
class="style10">, </span><span class="style11">B </span><span class="style10">;
    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">uint32_t </span><span
class="style11">i </span><span class="style10">= </span><span class="style4">0</span><span
class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span
class="style11">NMAX</span><span class="style10">; ++</span><span class="style11">i</span><span
class="style10">)  </span><span class="style11">A</span><span class="style10">.</span><span
class="style16">push_back </span><span class="style10">(</span><span class="style11">my_rand</span><span
class="style10">());
    </span><span class="style11">B </span><span class="style10">= </span><span class="style11">A </span><span
class="style10">;
    </span><span class="style2">//------------------------------------------------------------------------
    // If the result of number_threads / 6 is smaller than 1, internally use 1 thread
    //------------------------------------------------------------------------
    </span><span class="style11">bsp</span><span class="style10">::</span><span
class="style11">parallel_sort </span><span class="style10">(</span><span class="style11">A</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">A</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">(), </span><span class="style11">number_threads / 6</span><span
class="style10">);
    </span><span class="style2">//------------------------------------------------------------------------
    //  force to execute with 100 threads
    //------------------------------------------------------------------------
    </span><span class="style11">bsp</span><span class="style10">::</span><span
class="style11">sample_sort </span><span class="style10">(</span><span class="style11">B</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">B</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">(),</span><span class="style10"></span><span class="style4"> 100</span><span
class="style10">);

    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">uint32_t </span><span
class="style11">i </span><span class="style10">= </span><span class="style4">0</span><span
class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span
class="style11">NMAX </span><span class="style10">; ++</span><span class="style11">i</span><span
class="style10">)
        </span><span class="style5">if </span><span class="style10">(</span><span
class="style11">A</span><span class="style10">[</span><span class="style11">i</span><span
class="style10">] != </span><span class="style11">B</span><span class="style10">[</span><span
class="style11">i</span><span class="style10">])  </span><span class="style16">std</span><span
class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Error in the sorting process\n"</span><span class="style10">;
    </span><span class="style5">return </span><span class="style4">0 </span><span
class="style10">;
};</span></span> </code></pre>
          <span class="style9"> </span> </div>
        <br />
        <br />
        <p><a name="algorithms"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">2.-
            Algorithms</span></p>
        <br />
        <p><a name="introsort"></a> <span style="font-size: 16pt;font-weight: bold; color: black;">2.1.-
            sort </span></p>
        <p>  </p>
        <p style="margin-bottom: 0cm; line-height: 100%"><font face="Arimo, sans-serif">Sort is
            a implementation of the Introsort algorithm. Initially it uses quicksort, but when the numbers
            of division is greater than a number, it changes to the heapsort
            algorithm.</font></p>
        <p>  </p>

        <p style="margin-bottom: 0cm; line-height: 100%"><font face="Arimo, sans-serif">Heapsort is
            a O(NlogN) algorithm but slower than quick_sort. This is to
            prevent the worst case of QuickSort (N²).</font></p>
        <p>  </p>
        
        <table cellspacing="0" border="1" style="width: 855px; height: 86px;">
          <tbody>
            <tr>
              <td style="width: 151.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Algorithm</span></span></td>
              <td style="width: 105.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Parallel</span></span></td>
              <td style="width: 96.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;"> Stable</span></span></td>
              <td style="width: 174.667px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Additional memory</span></span></td>
              <td style="width: 329.983px; height: 50px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Best, average,and worst case</span></span></td>
            </tr>
            <tr>
              <td>sort</td>
              <td>No</td>
              <td>No</td>
              <td>Log N</td>
              <td>  N Log N, N Log N, N Log N </td>
            </tr>
          </tbody>
        </table>
        <p style="margin-bottom: 0cm; line-height: 100%"><font face="Arimo, sans-serif">
          </font></p>
        <br />
        <div class="caja_codigo">
          <pre><code><span style="font: 9pt Monospace;"><span class="style5"><br />template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style10">, </span><span class="style5">typename </span><span class="style11">compare</span><span
class="style10">&gt;
</span><span class="style5">void </span><span class="style11">sort </span><span
class="style10">(</span><span class="style11">iter_t first</span><span class="style10">, </span><span
class="style11">iter_t last</span><span class="style10">, </span><span class="style11">compare comp </span><span
class="style10">= </span><span class="style11">compare</span><span class="style10">()) </span><span
class="style10">;<br /><br /></span></span></code></pre>
          <span class="style9"> </span> </div>
        <br />
        <br />
        <p><a name="parallel_introsort"></a> <span style="font-size: 16pt;font-weight: bold; color: black;">2.2.-
            parallel_sort</span></p>
        <p> </p>
        This is the new algorithm  Block Indirect Sort. It's a hybrid algorithm,
        because with a small number of HW threads it uses a parallel version of
        introsort, and with a number of threads &gt; 5 uses the new algorithm. 
        When the number of threads is 1, it uses introsort.<br />
        <br />
        This algorithm combines the speed of GCC Parallel Sort with many cores,
        with the small memory consumption of Threading Building Blocks (TBB).
        This algorithm had been created and implemented by the author for this
        library.  The auxiliary memory needed is ( block_size * num of
        threads.) (See description in <a href="index.html#algorithm">1.3.- New Parallel Sort Algorithm</a> )<br />
        <br />
        <table cellspacing="0" border="1" style="width: 855px; height: 86px;">
          <tbody>
            <tr>
              <td style="width: 126.067px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Algorithm</span></span></td>
              <td style="width: 83.233px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Parallel</span></span></td>
              <td style="width: 79.9px;"><span style="font-style: italic;"><span
style="font-weight: bold;"> Stable</span></span></td>
              <td style="width: 226.05px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Additional memory</span></span></td>
              <td style="width: 329.983px; height: 50px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Best, average,and worst case</span></span></td>
            </tr>
            <tr>
              <td><span style="font-family: monospace;"><span style="font-family: Helvetica,sans-serif,Garuda;">parallel_sort</span></span><br />
              </td>
              <td>Yes</td>
              <td>No</td>
              <td>block_size * num. threads</td>
              <td>  N Log N , N Log N , N Log N </td>
            </tr>
          </tbody>
        </table>
        <br />
        <br />
        <div class="caja_codigo">
          <pre><br /><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style11"></span><span class="style10">&gt;</span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5"><br />void </span><span class="style11">parallel_sort </span><span
class="style10">(</span><span class="style11">iter_t first</span><span class="style10">, </span><span
class="style11">iter_t last</span><span class="style10">)</span><span class="style10">;</span></span></code>
<br /><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style10">, </span><span class="style5">typename </span><span class="style11">compare</span><span
class="style10">&gt;<br /></span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5">void </span><span class="style11">parallel_sort </span><span class="style10">(</span><span
class="style11">iter_t first</span><span class="style10">, </span><span class="style11">iter_t last</span><span
class="style10">, </span><span class="style11">compare comp</span><span class="style10"></span><span
class="style10">)</span><span class="style10">;<br /><br /></span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5">template </span><span class="style10">&lt;</span><span
class="style5">class </span><span class="style11">iter_t</span><span class="style11"></span><span
class="style10">&gt;</span></span></code><br /><code><span style="font: 9pt Monospace;"><span
class="style5">void </span><span class="style11">parallel_sort </span><span class="style10">(</span><span
class="style11">iter_t first</span><span class="style10">, </span><span class="style11">iter_t last</span><span
class="style10">, </span><span class="style11"></span><span class="style10"></span><span
class="style5">uint32_t </span><span class="style11">num_thread</span><span class="style10">)</span><span
class="style10">;<br /><br /></span></span></code><code><span style="font: 9pt Monospace;"><span
class="style10"><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style10">, </span><span class="style5">typename </span><span class="style11">compare</span><span
class="style10">&gt;</span></span></code>
</span><span class="style5">void </span><span class="style11">parallel_sort </span><span
class="style10">(</span><span class="style11">iter_t first</span><span class="style10">, </span><span
class="style11">iter_t last</span><span class="style10">, </span><span class="style11">compare comp</span><span
class="style10">, </span></span></code><code><span style="font: 9pt Monospace;"><span
class="style10"><code><span style="font: 9pt Monospace;"><span class="style10"></span><span
class="style11"></span><span class="style10"></span><span class="style5">uint32_t </span><span
class="style11">num_thread</span><span class="style10">)</span><span class="style10">;</span></span></code></span></span></code><br /> <code><span
style="font: 9pt Monospace;"><span class="style5"></span><span class="style10"></span></span></code></pre>
          <span class="style9"> </span> </div>
        <br />
        <p><a name="smart_merge_sort"></a> <span style="font-size: 16pt;font-weight: bold; color: black;">2.3.-
            stable_sort</span></p>
        <p> </p>
        <font face="Arimo, sans-serif">This is a new single threaded stable sort
          algorithm, internally named spin_sort, created and developed
          specifically for this library. This algorithm combines several ideas
          to improve on other stable sort algorithms.
          
        </font>
        <p style="margin-bottom: 0cm; line-height: 100%"><font face="Arimo, sans-serif">In
the
            benchmarks you can find a detailed description of the results in time
            and memory obtained. This algorithm uses an auxiliary memory of (N/2)
            elements.</font></p>
        <p>  </p>
        
        <table cellspacing="0" border="1" style="width: 855px; height: 86px;">
          <tbody>
            <tr>
              <td style="width: 151.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Algorithm</span></span></td>
              <td style="width: 105.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Parallel</span></span></td>
              <td style="width: 96.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;"> Stable</span></span></td>
              <td style="width: 174.667px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Additional memory</span></span></td>
              <td style="width: 329.983px; height: 50px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Best, average,and worst case</span></span></td>
            </tr>
            <tr>
              <td>stable_sort </td>
              <td><span style="font-family: Arimo,sans-serif;">No</span></td>
              <td>Yes<br />
              </td>
              <td>  N / 2 </td>
              <td>   N Log N , N Log N , N Log N </td>
            </tr>
          </tbody>
        </table>
        <p style="margin-bottom: 0cm; line-height: 100%"><font face="Arimo, sans-serif">
          </font></p>
        <br />
        <div class="caja_codigo"> <br />
          <pre><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style10">,<span style="color: black;"><span style="font-family: Helvetica,sans-serif,Garuda;"> </span></span> </span><span
class="style5">typename </span><span class="style11">compare</span><span class="style10">&gt;
</span><span class="style5">void </span><span class="style11">stable_sort </span><span
class="style10">(</span><span class="style11">iter_t first</span><span class="style10">, </span><span
class="style11">iter_t last</span><span class="style10">, </span><span class="style11">compare comp </span><span
class="style10">= </span><span class="style11">compare</span><span class="style10">())</span><span
class="style10">;</span></span></code></pre>
          <br />
          <span class="style9"> </span> </div>
        <br />
        <br />
        <p><a name="parallel_stable_sort"></a> <span style="font-size: 16pt;font-weight: bold; color: black;">2.4.-
            parallel_stable_sort</span></p>
        <p> </p>
        This is a parallel stable sort algorithm, built on top of the sample sort
        algorithm , bust using less auxiliary memory (N / 2 elements) in
        exchange for slowing it down about 10%.

        <p>  </p>

        <table cellspacing="0" border="1" style="width: 855px; height: 86px;">
          <tbody>
            <tr>
              <td style="width: 168px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Algorithm</span></span></td>
              <td style="width: 90.283px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Parallel</span></span></td>
              <td style="width: 96.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;"> Stable</span></span></td>
              <td style="width: 174.667px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Additional memory</span></span></td>
              <td style="width: 329.983px; height: 50px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Best, average,and worst case</span></span></td>
            </tr>
            <tr>
              <td>parallel_stable_sort </td>
              <td>Yes<br />
              </td>
              <td>Yes<br />
              </td>
              <td> N / 2 <br />
              </td>
              <td>  N Log N , N Log N , N Log N </td>
            </tr>
          </tbody>
        </table>
        <p style="margin-bottom: 0cm; line-height: 100%"><font face="Arimo, sans-serif">
          </font></p>
        <p> 
        </p>
        <div class="caja_codigo"> <br />
          <pre><code><span style="font: 9pt Monospace;"><span class="style5"></span><span
class="style10"></span><span class="style5"></span><span class="style11"></span><span
class="style10"></span><span class="style5"></span><span class="style11"></span><span
class="style10"></span><span class="style11"></span><span class="style10"></span><span
class="style11"></span><span class="style10"></span><span class="style5"></span><span
class="style11"></span><span class="style10"></span><span class="style11"></span><span
class="style10"></span><span class="style11"></span><span class="style10"></span><span
class="style10"></span></span></code></pre>
          <pre><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style11"></span><span class="style10">&gt;<br /></span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5">void </span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5"><code><span style="font: 9pt Monospace;"><span
class="style11">parallel_stable_sort</span></span></code></span><span class="style11"> </span><span
class="style10">(</span><span class="style11">iter_t first</span><span class="style10">, </span><span
class="style11">iter_t last</span><span class="style10">)</span><span class="style10">;</span></span></code>
<br /><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style10">, </span><span class="style5">typename </span><span class="style11">compare</span><span
class="style10">&gt;<br /></span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5">void </span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5"><code><span style="font: 9pt Monospace;"><span class="style11">parallel_stable_sort</span></span></code></span><span
class="style11"> </span><span class="style10">(</span><span class="style11">iter_t first</span><span
class="style10">, </span><span class="style11">iter_t last</span><span class="style10">, </span><span
class="style11">compare comp</span><span class="style10">)</span><span class="style10">;<br /><br /></span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5">template </span><span class="style10">&lt;</span><span
class="style5">class </span><span class="style11">iter_t</span><span class="style11"></span><span
class="style10">&gt;</span></span></code><br /><code><span style="font: 9pt Monospace;"><span
class="style5">void </span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5"><code><span style="font: 9pt Monospace;"><span class="style11">parallel_stable_sort</span></span></code></span><span
class="style11"> </span><span class="style10">(</span><span class="style11">iter_t first</span><span
class="style10">, </span><span class="style11">iter_t last</span><span class="style10">, </span><span
class="style11"></span><span class="style10"></span><span class="style5">uint32_t </span><span
class="style11">num_thread</span><span class="style10">)</span><span class="style10">;<br /><br /></span></span></code><code><span
style="font: 9pt Monospace;"><span class="style10"><code><span style="font: 9pt Monospace;"><span
class="style5">template </span><span class="style10">&lt;</span><span class="style5">class </span><span
class="style11">iter_t</span><span class="style10">, </span><span class="style5">typename </span><span
class="style11">compare</span><span class="style10">&gt;</span></span></code>
</span><span class="style5">void </span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5"><code><span style="font: 9pt Monospace;"><span class="style11">parallel_stable_sort</span></span></code></span><span
class="style11"> </span><span class="style10">(</span><span class="style11">iter_t first</span><span
class="style10">, </span><span class="style11">iter_t last</span><span class="style10">, </span><span
class="style11">compare comp</span><span class="style10">, </span></span></code><code><span
style="font: 9pt Monospace;"><span class="style10"><code><span style="font: 9pt Monospace;"><span
class="style10"></span><span class="style11"></span><span class="style10"></span><span
class="style5">uint32_t </span><span class="style11">num_thread</span><span class="style10">)</span><span
class="style10">;</span></span></code></span></span></code></pre>
          <br />
          <br />
          <span class="style9"> </span> </div>
        <br />
        
        <br />
        <p><a name="sample_sort"></a> <span style="font-size: 16pt;font-weight: bold; color: black;">2.5.-
            sample_sort</span></p>
        <p> </p>
        This is a parallel stable sort algorithm. It is faster than
        parallel_stable_sort but the auxiliary memory used is N elements. <br />
        You can see the details in the benchmark chapter<br />
        <p>  </p>
        <table cellspacing="0" border="1" style="width: 855px; height: 86px;">
          <tbody>
            <tr>
              <td style="width: 170.717px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Algorithm</span></span></td>
              <td style="width: 80.167px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Parallel</span></span></td>
              <td style="width: 96.7px;"><span style="font-style: italic;"><span
style="font-weight: bold;"> Stable</span></span></td>
              <td style="width: 174.667px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Additional memory</span></span></td>
              <td style="width: 329.983px; height: 50px;"><span style="font-style: italic;"><span
style="font-weight: bold;">Best, average,and worst case</span></span></td>
            </tr>
            <tr>
              <td>sample_sort </td>
              <td><span style="font-weight: bold;"><span style="font-family: monospace;"><span
style="font-family: Helvetica,sans-serif,Garuda;">Yes</span></span></span><br />
              </td>
              <td>Yes<br />
              </td>
              <td>  N<br />
              </td>
              <td>  N Log N , N Log N , N Log N </td>
            </tr>
          </tbody>
        </table>
        <p style="margin-bottom: 0cm; line-height: 100%"><font face="Arimo, sans-serif">
          </font></p>
        <br />
        <div class="caja_codigo"> <br />
          <code><span style="font: 9pt Monospace;"><span class="style5"></span></span></code>
          <pre><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style11"></span><span class="style10">&gt;</span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5"><br />void </span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5"></span><span class="style11">sample_sort</span></span></code><code><span
style="font: 9pt Monospace;"><span class="style11"> </span><span class="style10">(</span><span
class="style11">iter_t first</span><span class="style10">, </span><span class="style11">iter_t last</span><span
class="style10">)</span><span class="style10">;</span></span></code>
<br /><code><span style="font: 9pt Monospace;"><span class="style5">template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style10">,  </span><span class="style5">typename </span><span class="style11">compare</span><span
class="style10">&gt;<br /></span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5">void </span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5"></span><span class="style11">sample_sort</span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5"><code><span style="font: 9pt Monospace;"><span
class="style11"></span></span></code></span><span class="style11"> </span><span
class="style10">(</span><span class="style11">iter_t first</span><span class="style10">, </span><span
class="style11">iter_t last</span><span class="style10">, </span><span class="style11">compare comp</span><span
class="style10"></span><span class="style10">)</span><span class="style10">;<br /><br /></span></span></code><code><span
style="font: 9pt Monospace;"><span class="style5">template </span><span class="style10">&lt;</span><span
class="style5">class </span><span class="style11">iter_t</span><span class="style11"></span><span
class="style10">&gt;</span></span></code><br /><code><span style="font: 9pt Monospace;"><span
class="style5">void </span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5"></span><span class="style11">sample_sort</span></span></code><code><span
style="font: 9pt Monospace;"><span class="style11"> </span><span class="style10">(</span><span
class="style11">iter_t first</span><span class="style10">, </span><span class="style11">iter_t last</span><span
class="style10">, </span><span class="style11"></span><span class="style10"></span><span
class="style5">uint32_t </span><span class="style11">num_thread</span><span class="style10">)</span><span
class="style10">;</span></span></code><code><span style="font: 9pt Monospace;"><span
class="style10"><code><span style="font: 9pt Monospace;"><span class="style5"><br /><br />template </span><span
class="style10">&lt;</span><span class="style5">class </span><span class="style11">iter_t</span><span
class="style10">,  </span><span class="style5">typename </span><span class="style11">compare</span><span
class="style10">&gt;</span></span></code>
</span><span class="style5">void </span></span></code><code><span style="font: 9pt Monospace;"><span
class="style5"></span><span class="style11">sample_sort</span></span></code><code><span
style="font: 9pt Monospace;"><span class="style11"> </span><span class="style10">(</span><span
class="style11">iter_t first</span><span class="style10">, </span><span class="style11">iter_t last</span><span
class="style10">, </span><span class="style11">compare comp</span><span class="style10">, </span></span></code><code><span
style="font: 9pt Monospace;"><span class="style10"><code><span style="font: 9pt Monospace;"><span
class="style10"></span><span class="style11"></span><span class="style10"></span><span
class="style5">uint32_t </span><span class="style11">num_thread</span><span class="style10">)</span><span
class="style10">;<br /><br /></span></span></code></span></span></code></pre>
          <span class="style9"> </span> </div>
        <br />
        <br />
        <p><a name="less_ptr"></a> <span style="font-size: 16pt;font-weight: bold; color: black;">2.6.-
            less_ptr_no_null</span></p>
        <br />
        Sometimes, we don't want sort physically the data by a concept. In such cases we can create a vector of pointers or iterators to the elements, named index, and sort the index. This permits keeping separate indexes into the the same data set at the same time, each sorted by different concepts.<br /><br />
        To sort an index , we have a special comparison object
        less_ptr_no_null , which permits calls to the internal comparison between
        objects, from the pointers to the iterators. The less_ptr_no_null object
        receives in the constructor the comparison object between two objects.
        This comparison object make trivial the sorting of a index<br />
        <br />
        <br />
        <div class="caja_codigo"> <code><span style="font: 9pt Monospace;"><span
class="style2"><br />//---------------------------------------------------------------------------
</span></span></code><pre><code><span style="font: 9pt Monospace;"><span class="style15">/// </span><span
class="style17">@class </span><span class="style15">less_ptr_no_null
///
/// </span><span class="style17">@remarks </span><span class="style15">this is the comparison object for a pair of (non-null) pointers.
</span><span class="style2">//---------------------------------------------------------------------------
</span><span class="style5">template    </span><span class="style10">&lt;   </span><span
class="style5">class </span><span class="style11">iter_t </span><span class="style10">,
                </span><span class="style5">class </span><span class="style11">comp_t
                </span><span class="style10">= </span><span class="style16">std</span><span
class="style10">::</span><span class="style16">less </span><span class="style10">&lt;</span><span
class="style5">typename </span><span class="style16">iterator_traits</span><span
class="style10">&lt;</span><span class="style11">iter_t</span><span class="style10">&gt;::</span><span
class="style16">value_type</span><span class="style10">&gt; &gt;
</span><span class="style5">struct </span><span class="style11">less_ptr_no_null
</span><span class="style10">{   </span><span class="style2">//----------------------------- Variables -----------------------
    </span><span class="style11">comp_t comp </span><span class="style10">;
    </span><span class="style2">//----------------------------- Functions ----------------------
    </span><span class="style5">inline </span><span class="style11">less_ptr_no_null </span><span
class="style10">(</span><span class="style11">comp_t C1 </span><span class="style10">= </span><span
class="style11">comp_t</span><span class="style10">()): </span><span class="style11">comp </span><span
class="style10">(</span><span class="style11">C1</span><span class="style10">) {};<br />   <br />    </span><span
class="style5">inline bool operator </span><span class="style10">() (</span><span
class="style11">iter_t T1</span><span class="style10">, </span><span class="style11">iter_t T2</span><span
class="style10">) </span><span class="style5">const
    </span><span class="style10">{   </span><span class="style2"></span><span class="style5">return  </span><span
class="style11">comp </span><span class="style10">(*</span><span class="style11">T1 </span><span
class="style10">,*</span><span class="style11">T2</span><span class="style10">);
    };
};</span></span></code></pre>
          <br />
          <br />
          <span class="style9"> </span> </div>
        <br />
        In this example, there are structures sorted by the
        num field , but we create an index with the elements sorted by name,
        and another for to sorted by weight. It creates the less_ptr_no_null
        comparison objects, and sorts the indices, and then prints the results.<br />
        <br />
        <br />
        <div class="caja_codigo"> <br />
          <pre><code><span style="font: 9pt Monospace;"><span class="style9">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;iterator&gt;
#include &lt;cassert&gt;

#include &lt;boost/sort/parallel/sort.hpp&gt;

</span><span class="style5">using namespace </span><span class="style16">std</span><span
class="style10">;
</span><span class="style5">namespace </span><span class="style11">bs_sort </span><span
class="style10">= </span><span class="style16">boost</span><span class="style10">::</span><span
class="style16">sort</span><span class="style10">::</span><span class="style11">parallel</span><span
class="style10">;
</span><span class="style5">using </span><span class="style11">bs_sort</span><span
class="style10">::</span><span class="style11">less_ptr_no_null</span><span class="style10">;

</span><span class="style5">struct </span><span class="style11">member
</span><span class="style10">{   </span><span class="style5">uint32_t </span><span
class="style11">num</span><span class="style10">;
    </span><span class="style16">std</span><span class="style10">::</span><span
class="style16">string </span><span class="style11">name</span><span class="style10">;
    </span><span class="style5">float </span><span class="style11">weight</span><span
class="style10">;
};
</span><span class="style5">typedef typename </span><span class="style16">vector</span><span
class="style10">&lt;</span><span class="style11">member</span><span class="style10">&gt;::</span><span
class="style16">iterator </span><span class="style11">iter_t</span><span class="style10">;

</span><span class="style5">struct </span><span class="style11">cmp_num
</span><span class="style10">{   </span><span class="style5">bool operator</span><span
class="style10">() ( </span><span class="style5">const </span><span class="style11">member </span><span
class="style10">&amp;</span><span class="style11">m1</span><span class="style10">, </span><span
class="style5">const </span><span class="style11">member </span><span class="style10">&amp;</span><span
class="style11">m2</span><span class="style10">) </span><span class="style5">const
    </span><span class="style10">{   </span><span class="style5">return </span><span
class="style10">(</span><span class="style11">m1</span><span class="style10">.</span><span
class="style11">num </span><span class="style10">&lt; </span><span class="style11">m2</span><span
class="style10">.</span><span class="style11">num</span><span class="style10">); };
};

</span><span class="style5">struct </span><span class="style11">cmp_name
</span><span class="style10">{   </span><span class="style5">bool operator</span><span
class="style10">() (</span><span class="style5">const </span><span class="style11">member </span><span
class="style10">&amp;</span><span class="style11">m1</span><span class="style10">, </span><span
class="style5">const </span><span class="style11">member </span><span class="style10">&amp;</span><span
class="style11">m2</span><span class="style10">)</span><span class="style5">const
    </span><span class="style10">{   </span><span class="style5">return </span><span
class="style10">(</span><span class="style11">m1</span><span class="style10">.</span><span
class="style11">name </span><span class="style10">&lt; </span><span class="style11">m2</span><span
class="style10">.</span><span class="style11">name</span><span class="style10">); };
};

</span><span class="style5">struct </span><span class="style11">cmp_weight
</span><span class="style10">{   </span><span class="style5">bool operator</span><span
class="style10">() (</span><span class="style5">const </span><span class="style11">member </span><span
class="style10">&amp;</span><span class="style11">m1</span><span class="style10">, </span><span
class="style5">const </span><span class="style11">member </span><span class="style10">&amp;</span><span
class="style11">m2</span><span class="style10">) </span><span class="style5">const
    </span><span class="style10">{   </span><span class="style5">return </span><span
class="style10">(</span><span class="style11">m1</span><span class="style10">.</span><span
class="style11">weight </span><span class="style10">&lt; </span><span class="style11">m2</span><span
class="style10">.</span><span class="style11">weight</span><span class="style10">); };
};

</span><span class="style11">ostream </span><span class="style10">&amp; </span><span
class="style5">operator </span><span class="style10">&lt;&lt; (</span><span class="style11">ostream </span><span
class="style10">&amp; </span><span class="style11">out</span><span class="style10">, </span><span
class="style5">const </span><span class="style11">member </span><span class="style10">&amp;</span><span
class="style11">m</span><span class="style10">)
{   </span><span class="style11">out</span><span class="style10">&lt;&lt;</span><span
class="style11">m</span><span class="style10">.</span><span class="style11">num</span><span
class="style10">&lt;&lt;</span><span class="style6">" - "</span><span class="style10">&lt;&lt;</span><span
class="style11">m</span><span class="style10">.</span><span class="style11">name</span><span
class="style10">&lt;&lt;</span><span class="style6">" - "</span><span class="style10">&lt;&lt;</span><span
class="style11">m</span><span class="style10">.</span><span class="style11">weight</span><span
class="style10">&lt;&lt;</span><span class="style16">endl</span><span class="style10">;
    </span><span class="style5">return </span><span class="style11">out </span><span
class="style10">;
};

</span><span class="style5">int </span><span class="style11">main </span><span class="style10">(</span><span
class="style5">int</span><span class="style10">, </span><span class="style5">char</span><span
class="style10">*[])
{   </span><span class="style2">//------------------------ begin -----------------------
    // The data are sorted by number
    </span><span class="style16">vector</span><span class="style10">&lt;</span><span
class="style11">member</span><span class="style10">&gt; </span><span class="style11">VM </span><span
class="style10">= { {</span><span class="style4">1</span><span class="style10">, </span><span
class="style6">"Peter"</span><span class="style10">,</span><span class="style4"> 85.6</span><span
class="style10">},   {</span><span class="style4">2</span><span class="style10">, </span><span
class="style6">"Hanna"</span><span class="style10">, </span><span class="style4">63.4</span><span
class="style10">},
                          {</span><span class="style4">3</span><span class="style10">, </span><span
class="style6">"John"</span><span class="style10">,  </span><span class="style4">83.6</span><span
class="style10">},   {</span><span class="style4">4</span><span class="style10">, </span><span
class="style6">"Elsa"</span><span class="style10">,  </span><span class="style4">56.6</span><span
class="style10">} };
    </span><span class="style16"><br />    vector</span><span class="style10">&lt;</span><span
class="style11">iter_t</span><span class="style10">&gt; </span><span class="style11">Ix_name</span><span
class="style10">, </span><span class="style11">Ix_weight</span><span class="style10">;
    </span><span class="style5">for </span><span class="style10">(</span><span class="style11">iter_t it</span><span
class="style10">= </span><span class="style11">VM</span><span class="style10">.</span><span
class="style16">begin</span><span class="style10">(); </span><span class="style11">it </span><span
class="style10">!= </span><span class="style11">VM</span><span class="style10">.</span><span
class="style16">end</span><span class="style10">(); ++</span><span class="style11">it</span><span
class="style10">)
    {   </span><span class="style11">Ix_name</span><span class="style10">.</span><span
class="style16">push_back </span><span class="style10">(</span><span class="style11">it</span><span
class="style10">);
        </span><span class="style11">Ix_weight</span><span class="style10">.</span><span
class="style16">push_back</span><span class="style10">(</span><span class="style11">it</span><span
class="style10">);
    };

    </span><span class="style5">typedef </span><span class="style11">less_ptr_no_null </span><span
class="style10">&lt;</span><span class="style11">iter_t</span><span class="style10">, </span><span
class="style11">cmp_name</span><span class="style10">&gt;     </span><span class="style11">compare_name </span><span
class="style10">;
    </span><span class="style5">typedef </span><span class="style11">less_ptr_no_null </span><span
class="style10">&lt;</span><span class="style11">iter_t</span><span class="style10">, </span><span
class="style11">cmp_weight</span><span class="style10">&gt;   </span><span class="style11">compare_weight </span><span
class="style10">;

    </span><span class="style11">bs_sort</span><span class="style10">::</span><span
class="style16">sort </span><span class="style10">(</span><span class="style11">Ix_name</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(),   </span><span
class="style11">Ix_name</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">(),   </span><span class="style11">compare_name  </span><span class="style10">());
    </span><span class="style11">bs_sort</span><span class="style10">::</span><span
class="style16">sort </span><span class="style10">(</span><span class="style11">Ix_weight</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">Ix_weight</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">(), </span><span class="style11">compare_weight</span><span class="style10">());

    </span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Printing sorted by number \n"</span><span class="style10">;
    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">auto </span><span
class="style11">it </span><span class="style10">= </span><span class="style11">VM</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(); </span><span
class="style11">it </span><span class="style10">!= </span><span class="style11">VM</span><span
class="style10">.</span><span class="style16">end</span><span class="style10">(); ++</span><span
class="style11">it</span><span class="style10">) </span><span class="style16">cout</span><span
class="style10">&lt;&lt;(*</span><span class="style11">it</span><span class="style10">);

    </span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Printing sorted by name \n"</span><span class="style10">;
    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">auto </span><span
class="style11">it </span><span class="style10">= </span><span class="style11">Ix_name</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(); </span><span
class="style11">it </span><span class="style10">!= </span><span class="style11">Ix_name</span><span
class="style10">.</span><span class="style16">end</span><span class="style10">(); ++</span><span
class="style11">it</span><span class="style10">) </span><span class="style16">cout</span><span
class="style10">&lt;&lt;(*(*</span><span class="style11">it</span><span class="style10">));

    </span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Printing sorted by weight \n"</span><span class="style10">;
    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">auto </span><span
class="style11">it </span><span class="style10">= </span><span class="style11">Ix_weight</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(); </span><span
class="style11">it </span><span class="style10">!= </span><span class="style11">Ix_weight</span><span
class="style10">.</span><span class="style16">end</span><span class="style10">(); ++</span><span
class="style11">it</span><span class="style10">) </span><span class="style16">cout</span><span
class="style10">&lt;&lt;(*(*</span><span class="style11">it</span><span class="style10">));

    </span><span class="style5">return </span><span class="style4">0</span><span
class="style10">;
};</span></span></code></pre>
          <br />
          <br />
          <span class="style9"> </span> </div>
        <br />
         The output of the program is<br />
        <br />
        <div class="caja_codigo"> <br />
          Printing sorted by number <br />
          1 - Peter - 85.6<br />
          2 - Hanna - 63.4<br />
          3 - John - 83.6<br />
          4 - Elsa - 56.6<br />
          Printing sorted by name <br />
          4 - Elsa - 56.6<br />
          2 - Hanna - 63.4<br />
          3 - John - 83.6<br />
          1 - Peter - 85.6<br />
          Printing sorted by weight <br />
          4 - Elsa - 56.6<br />
          2 - Hanna - 63.4<br />
          3 - John - 83.6<br />
          1 - Peter - 85.6<br />
          <br />
          <span class="style9"> </span> </div>
        </div>
      <br />
      <a title="benchmark.html" href="benchmark.html" style="float:right"><img alt="link to next page"
src="img/next.png" /></a> <a title="index.html" href="index.html" style="float:right"><img
alt="go to head of the page" src="img/up.png" /></a>  <a title="index.html" href="index.html"
style="float:right"><img alt="link to index page" src="img/prev.png" /></a>
      <table width="100%" xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision">
        <tbody>
          <tr>
            <td align="left">
              <p><small>Last revised: Oct 20, 2016</small></p>
            </td>
            <td> <br />
            </td>
          </tr>
        </tbody>
      </table>
      <hr />
      <div id="footer">
        <div id="footer-left">
          <div id="copyright">
            <p>Copyright Francisco Jose Tapia 2016.</p>
          </div>
          <div id="license">
            <p>Distributed under the <a href="/LICENSE_1_0.txt" class="internal">Boost
                Software License, Version 1.0</a>.</p>
          </div>
        </div>
        <div id="footer-right">
          <div id="banners">
            <p id="banner-xhtml"> <a href="http://validator.w3.org/check?uri=referer"
class="external">XHTML 1.0</a></p>
            <p id="banner-css"> <a href="http://jigsaw.w3.org/css-validator/check/referer"
class="external">CSS</a></p>
            <p id="banner-osi"> <a href="http://www.opensource.org/docs/definition.php"
class="external">OSI Certified</a></p>
          </div>
        </div>
      </div>
    </div>
    
  



</body></html>